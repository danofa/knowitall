extends ../layout

block content
	table.table.table-hover.table-bordered.table-striped.table-condensed
		th ID
		th Title
		th Description
		th Parent
		each top in topics
			tr
				td= top._id
				td= top.title
				td= top.description
				if top.parent
					td= top.parent.title
				else
					td -
				td
					a.btn(href="delete/#{top._id}" title="Delete")
						i.glyphicon.glyphicon-trash
					a.btn(href="edit/#{top._id}" title="Edit")
						i.glyphicon.glyphicon-edit
	
	mixin displayChildren(topic, topics)
		- var subTopics = getChTp(topic, topics);
		if subTopics.length > 0
			| #{topic.title} (+ child)
			ul
				each t in subTopics
					li
						mixin displayChildren(t, topics)
		else
			| #{topic.title} (+ child)
			
	ul.tree
		li (+ child)
		each top in topics
			if !top.parent
				li
					+displayChildren(top, topics)

	include ../includes/links.jade